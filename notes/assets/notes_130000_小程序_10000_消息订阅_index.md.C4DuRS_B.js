import{_ as e,c as o,o as a,a9 as i}from"./chunks/framework.C_6YpzP3.js";const t="/notes/assets/image.BE5esY1e.png",g=JSON.parse('{"title":"小程序订阅功能","description":"","frontmatter":{},"headers":[],"relativePath":"notes/130000_小程序/10000_消息订阅/index.md","filePath":"notes/130000_小程序/10000_消息订阅/index.md"}'),r={name:"notes/130000_小程序/10000_消息订阅/index.md"},d=i('<h1 id="小程序订阅功能" tabindex="-1">小程序订阅功能 <a class="header-anchor" href="#小程序订阅功能" aria-label="Permalink to &quot;小程序订阅功能&quot;">​</a></h1><h2 id="流程" tabindex="-1">流程 <a class="header-anchor" href="#流程" aria-label="Permalink to &quot;流程&quot;">​</a></h2><ol><li>申请小程序订阅消息功能</li><li>申请小程序订阅消息模板，生成<code>template_id</code></li><li>后端根据<code>APPID</code>和<code>APPSECRET</code>生成<code>ACCESS_TOKEN</code></li><li>前端获取当前用户的<code>js_code</code>传给后端</li><li>前端弹窗提示当前用户<code>授权消息订阅</code>功能</li><li>后端根据<code>APPID</code>、<code>APPSECRET</code>和<code>js_code</code>生成当前用户的<code>openid</code></li><li>后端通过<code>touser(openid)</code>、<code>ACCESS_TOKEN</code>、<code>template_id</code>和<code>data（消息配置信息）</code>发送订阅消息</li><li>用户收到信息</li></ol><h2 id="相关接口" tabindex="-1">相关接口 <a class="header-anchor" href="#相关接口" aria-label="Permalink to &quot;相关接口&quot;">​</a></h2><ol><li><a href="https://mp.weixin.qq.com/" target="_blank" rel="noreferrer">小程序公众平台-功能-订阅消息（需要手动跳转）</a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/mp-access-token/getAccessToken.html" target="_blank" rel="noreferrer">生成<code>ACCESS_TOKEN</code></a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/user-login/code2Session.html" target="_blank" rel="noreferrer">生成<code>openid</code></a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/mp-message-management/subscribe-message/sendMessage.html" target="_blank" rel="noreferrer">发送订阅消息</a></li></ol><h2 id="效果" tabindex="-1">效果 <a class="header-anchor" href="#效果" aria-label="Permalink to &quot;效果&quot;">​</a></h2><p><img src="'+t+'" alt="接收消息"></p>',7),c=[d];function l(n,s,_,p,m,h){return a(),o("div",null,c)}const q=e(r,[["render",l]]);export{g as __pageData,q as default};
